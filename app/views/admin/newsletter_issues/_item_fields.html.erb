<%# locals: (item_form:) -%>
<div
  data-nested-form-wrapper
  data-controller="article-autofill"
  data-article-autofill-url-value="<%= admin_article_searches_path %>"
  class="flex items-start gap-2 rounded-lg border p-3"
  style="border-color: var(--lui-theme-border); background: var(--lui-theme-surface-secondary);"
>
  <span data-sortable-handle class="admin-faint mt-2 cursor-grab text-lg">☰</span>

  <div class="flex-1 space-y-2">
    <%= lui.combobox(
      name: :article_id,
      form: item_form,
      label: "Article",
      placeholder: "Search articles…",
      url: admin_article_searches_path,
      min_chars: 2,
      debounce: 250
    ) %>

    <div data-article-autofill-target="titleField"><%= lui.input(name: :title, form: item_form, label: "Title") %></div>

    <div data-article-autofill-target="urlField">
      <%= lui.input(name: :url, form: item_form, type: :url, label: "URL") %>
    </div>

    <div data-article-autofill-target="descriptionField">
      <%= lui.textarea(name: :description, form: item_form, label: "Description", rows: 2) %>
    </div>
  </div>

  <%= item_form.hidden_field :id %>
  <%= item_form.hidden_field :position %>
  <%= item_form.hidden_field :_destroy, value: "0" %>

  <button type="button" data-action="nested-form#remove" class="admin-delete-btn mt-2 text-sm">✕</button>
</div>
