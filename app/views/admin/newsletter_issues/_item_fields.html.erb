<%# locals: (item_form:) -%>
<div
  data-nested-form-wrapper
  class="flex items-start gap-2 rounded-lg border p-3"
  style="border-color: var(--lui-theme-border); background: var(--lui-theme-surface-secondary);"
>
  <span data-sortable-handle class="admin-faint mt-2 cursor-grab text-lg">&#9776;</span>

  <div class="flex-1 space-y-2">
    <div class="grid grid-cols-2 gap-2">
      <div data-controller="article-autofill" data-article-autofill-url-value="<%= admin_article_searches_path %>">
        <%= lui.combobox(
          name: :article_id,
          form: item_form,
          label: "Article",
          placeholder: "Search articles…",
          url: admin_article_searches_path,
          min_chars: 2,
          debounce: 250
        ) %>

        <div data-article-autofill-target="titleField" class="hidden"></div>
        <div data-article-autofill-target="urlField" class="hidden"></div>
        <div data-article-autofill-target="descriptionField" class="hidden"></div>
      </div>

      <div data-controller="gem-autofill" data-gem-autofill-url-value="<%= admin_gem_searches_path %>">
        <%= lui.combobox(
          name: :ruby_gem_id,
          form: item_form,
          label: "Gem",
          placeholder: "Search gems…",
          url: admin_gem_searches_path,
          min_chars: 2,
          debounce: 250
        ) %>
      </div>
    </div>

    <%= lui.input(name: :title, form: item_form, label: "Title") %>
    <%= lui.input(name: :url, form: item_form, type: :url, label: "URL") %>
    <%= lui.textarea(name: :description, form: item_form, label: "Description", rows: 2) %>
  </div>

  <%= item_form.hidden_field :id %>
  <%= item_form.hidden_field :position %>
  <%= item_form.hidden_field :_destroy, value: "0" %>

  <button type="button" data-action="nested-form#remove" class="admin-delete-btn mt-2 text-sm">&#10005;</button>
</div>
