<div class="mb-6 flex items-center justify-between">
  <div>
    <h1 class="admin-heading text-2xl font-semibold">Newsletter Issues</h1>
    <p class="admin-subtext mt-1 text-sm"><%= @newsletter_issues.size %> issues on this page</p>
  </div>

  <%= lui.button(url: new_admin_newsletter_issue_path, icon: "plus") { "New Issue" } %>
</div>

<% if @newsletter_issues.any? %>
  <%= lui.table(data: @newsletter_issues) do |table| %>
    <% table.with_column("Issue #") { |issue| link_to "##{issue.issue_number}", admin_newsletter_issue_path(issue) } %>
    <% table.with_column("Subject") { |issue| truncate(issue.subject, length: 50) } %>
    <% table.with_column("Sent At") { |issue| issue.sent_at&.strftime("%b %d, %Y") || "â€”" } %>
    <% table.with_column("Subscribers") { |issue| issue.subscriber_count } %>
    <% table.with_column("Total Clicks") { |issue| issue.total_clicks } %>
    <% table.with_action { |issue| link_to "Edit", edit_admin_newsletter_issue_path(issue) } %>
    <% table.with_action { |issue| link_to "Delete", admin_newsletter_issue_path(issue), data: { turbo_method: :delete, turbo_confirm: "Delete this issue?" } } %>
  <% end %>
  <%= render "admin/shared/pagination", pagy: @pagy %>
<% else %>
  <div class="admin-card py-12 text-center">
    <p class="admin-subtext mb-4 text-sm">No newsletter issues yet</p>
    <%= lui.button(url: new_admin_newsletter_issue_path, icon: "plus") { "Create your first issue" } %>
  </div>
<% end %>
