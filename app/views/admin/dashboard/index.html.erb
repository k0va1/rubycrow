<div class="mb-8">
  <h1 class="text-2xl font-semibold text-zinc-950">Dashboard</h1>
  <p class="mt-1 text-sm text-zinc-500">Overview of your newsletter</p>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
  <%= render "admin/dashboard/stat_card", label: "Subscribers", value: @active_subscribers, value_label: "active", total: @total_subscribers %>
  <%= render "admin/dashboard/stat_card", label: "Blogs", value: @active_blogs, value_label: "active", total: @total_blogs %>
  <%= render "admin/dashboard/stat_card", label: "Articles", value: @unprocessed_articles, value_label: "unprocessed", total: @total_articles %>
  <%= render "admin/dashboard/stat_card", label: "Issues", value: @sent_issues, value_label: "sent", total: @total_issues %>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <div>
    <h2 class="text-lg font-semibold text-zinc-950 mb-4">Recent Issues</h2>
    <% if @recent_issues.any? %>
      <%= lui.table(data: @recent_issues) do |table| %>
        <% table.with_column("Issue #") { |issue| link_to "##{issue.issue_number}", admin_newsletter_issue_path(issue) } %>
        <% table.with_column("Subject") { |issue| truncate(issue.subject, length: 40) } %>
        <% table.with_column("Sent At") { |issue| issue.sent_at&.strftime("%b %d, %Y") || "—" } %>
        <% table.with_action { |issue| link_to "View", admin_newsletter_issue_path(issue) } %>
      <% end %>
    <% else %>
      <div class="rounded-lg bg-zinc-50 ring-1 ring-zinc-950/5 py-8 text-center">
        <p class="text-sm text-zinc-500">No issues yet</p>
      </div>
    <% end %>
  </div>

  <div>
    <h2 class="text-lg font-semibold text-zinc-950 mb-4">Recent Articles</h2>
    <% if @recent_articles.any? %>
      <%= lui.table(data: @recent_articles) do |table| %>
        <% table.with_column("Title") { |article| link_to truncate(article.title, length: 35), admin_article_path(article) } %>
        <% table.with_column("Blog") { |article| article.blog.name } %>
        <% table.with_column("Published") { |article| article.published_at&.strftime("%b %d, %Y") || "—" } %>
        <% table.with_action { |article| link_to "View", admin_article_path(article) } %>
      <% end %>
    <% else %>
      <div class="rounded-lg bg-zinc-50 ring-1 ring-zinc-950/5 py-8 text-center">
        <p class="text-sm text-zinc-500">No articles yet</p>
      </div>
    <% end %>
  </div>
</div>
