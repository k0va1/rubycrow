<div class="mb-2"><%= link_to "← Articles", admin_articles_path, class: "text-sm admin-link-back" %></div>

<div class="mb-6 flex items-center justify-between">
  <h1 class="admin-heading text-2xl font-semibold"><%= truncate(@article.title, length: 60) %></h1>

  <div class="flex gap-2">
    <% if @article.archived? %>
      <%= lui.button(url: unarchive_admin_article_path(@article), style: :outline, data: { turbo_method: :patch }) { "Unarchive" } %>
    <% else %>
      <%= lui.button(url: archive_admin_article_path(@article), style: :outline, data: { turbo_method: :patch }) { "Archive" } %>
    <% end %>

    <%= lui.button(url: edit_admin_article_path(@article), style: :outline) { "Edit" } %>
    <%= link_to "Delete", admin_article_path(@article), data: { turbo_method: :delete, turbo_confirm: "Delete this article?" }, class: "inline-flex items-center rounded-lg px-3 py-2 text-sm font-medium admin-delete-btn" %>
  </div>
</div>

<%= lui.description_list do |list| %>
  <% list.with_item(label: "Title", value: @article.title) %>

  <% list.with_item(label: "URL") do %>
    <%= link_to @article.url, safe_external_url(@article.url), target: "_blank", rel: "noopener noreferrer" %>
  <% end %>

  <% list.with_item(label: "Blog") do %>
    <%= link_to @article.blog.name, admin_blog_path(@article.blog) %>
  <% end %>

  <% list.with_item(label: "Published At", value: @article.published_at&.strftime("%b %d, %Y %H:%M") || "—") %>

  <% list.with_item(label: "Processed") do %>
    <% if @article.processed? %>
      <%= lui.badge(status: :success) { "Yes" } %>
    <% else %>
      <%= lui.badge(status: :warning) { "No" } %>
    <% end %>
  <% end %>

  <% list.with_item(label: "Tags") do %>
    <% if @article.tags.any? %>
      <div class="flex flex-wrap gap-1.5">
        <% @article.tags.each do |tag| %>
          <%= lui.badge { tag } %>
        <% end %>
      </div>
    <% else %>
      —
    <% end %>
  <% end %>

  <% list.with_item(label: "Archived") do %>
    <% if @article.archived? %>
      <%= lui.badge(status: :error) { "Yes — #{@article.archived_at.strftime("%b %d, %Y %H:%M")}" } %>
    <% else %>
      <%= lui.badge { "No" } %>
    <% end %>
  <% end %>

  <% list.with_item(label: "Featured in Issue", value: @article.featured_in_issue || "—") %>
  <% list.with_item(label: "Summary", value: @article.summary || "—") %>
<% end %>
